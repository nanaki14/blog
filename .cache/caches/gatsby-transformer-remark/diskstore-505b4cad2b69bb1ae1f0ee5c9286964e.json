{"expireTime":9007200819756301000,"key":"transformer-remark-markdown-ast-578cd2c1ee7d2fe9cfc4c7d60cbb28df-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"こんにちわ、ななきです。","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":13,"offset":13},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":13,"offset":13},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"最近GAとかGTMに苦しめられてます。","position":{"start":{"line":4,"column":1,"offset":15},"end":{"line":4,"column":20,"offset":34},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":15},"end":{"line":4,"column":20,"offset":34},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"特にReactでhelmetを使ったtitleの変更後にGAやGTMに情報を伝える場合に反映前のものや、遷移前のページのものが伝わることがありました。","position":{"start":{"line":6,"column":1,"offset":36},"end":{"line":6,"column":76,"offset":111},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":36},"end":{"line":6,"column":76,"offset":111},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"多分Vueでも同様な事が起こると思うので、メモ代わりに対応方法残しておきます。","position":{"start":{"line":8,"column":1,"offset":113},"end":{"line":8,"column":40,"offset":152},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":113},"end":{"line":8,"column":40,"offset":152},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"setTimeout","position":{"start":{"line":10,"column":4,"offset":157},"end":{"line":10,"column":14,"offset":167},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":154},"end":{"line":10,"column":14,"offset":167},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"いろんなライフサイクルや状態の変更後に ","position":{"start":{"line":12,"column":1,"offset":169},"end":{"line":12,"column":21,"offset":189},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">dataLayer.push</code>","position":{"start":{"line":12,"column":21,"offset":189},"end":{"line":12,"column":37,"offset":205},"indent":[]}},{"type":"text","value":" を試したのですがうまくいかず調べてたどり着いたのが ","position":{"start":{"line":12,"column":37,"offset":205},"end":{"line":12,"column":64,"offset":232},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">setTimeout</code>","position":{"start":{"line":12,"column":64,"offset":232},"end":{"line":12,"column":76,"offset":244},"indent":[]}},{"type":"text","value":" でした。","position":{"start":{"line":12,"column":76,"offset":244},"end":{"line":12,"column":81,"offset":249},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":169},"end":{"line":12,"column":81,"offset":249},"indent":[]}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">setTimeout(() =&gt; {\n  dataLayer.push({ event: &#39;custom-name&#39; })\n}, 0)</code></pre></div>","position":{"start":{"line":14,"column":1,"offset":251},"end":{"line":18,"column":4,"offset":326},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"こんなかんじで ","position":{"start":{"line":20,"column":1,"offset":328},"end":{"line":20,"column":9,"offset":336},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">componentDidMount</code>","position":{"start":{"line":20,"column":9,"offset":336},"end":{"line":20,"column":28,"offset":355},"indent":[]}},{"type":"text","value":" や ","position":{"start":{"line":20,"column":28,"offset":355},"end":{"line":20,"column":31,"offset":358},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">componentWillReceiveProps</code>","position":{"start":{"line":20,"column":31,"offset":358},"end":{"line":20,"column":58,"offset":385},"indent":[]}},{"type":"text","value":" などの中で発火させると正しく変更後・遷移後のtitleを渡すことが出来ました。","position":{"start":{"line":20,"column":58,"offset":385},"end":{"line":20,"column":98,"offset":425},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":328},"end":{"line":20,"column":98,"offset":425},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"あまりスマートな解決策では無いかもしれませんが、issue内でも他の方法が上がっておらず一旦この形で乗り切るしかなさそうですね。","position":{"start":{"line":22,"column":1,"offset":427},"end":{"line":22,"column":65,"offset":491},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":427},"end":{"line":22,"column":65,"offset":491},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"余談ですが、このコードを書いたときに、昔上司に ","position":{"start":{"line":24,"column":1,"offset":493},"end":{"line":24,"column":25,"offset":517},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">setTimeout</code>","position":{"start":{"line":24,"column":25,"offset":517},"end":{"line":24,"column":37,"offset":529},"indent":[]}},{"type":"text","value":" は魔法だからうまく行かなかったら試してみなさいと言われたのを思い出したました。","position":{"start":{"line":24,"column":37,"offset":529},"end":{"line":24,"column":77,"offset":569},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":493},"end":{"line":24,"column":77,"offset":569},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":24,"column":77,"offset":569}}}}