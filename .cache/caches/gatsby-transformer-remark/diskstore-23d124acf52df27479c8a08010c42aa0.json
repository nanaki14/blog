{"expireTime":9007200819756350000,"key":"transformer-remark-markdown-html-ded64da072fbff4338ce8181424025c4-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<p>こんにちわ、ななきです。</p>\n<p>TypeScript と Redux が楽しい今日このごろです。</p>\n<p>そんな中 react-redux の次期バージョンに HooksAPI が追加されていたのですこし触ってみました。</p>\n<p>API の詳細は<a href=\"https://react-redux.js.org/next/api/hooks\">こちら</a>です。</p>\n<h2>useStore</h2>\n<p>useStore は Provider へ渡している store オブジェクトを参照できる関数です。</p>\n<p>使う前の準備としてはいつもどおり Provider に store を渡します。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const store = createStore()\n\nexport default function App() {\n  return (\n    &lt;Provider store={store}&gt;\n      ...\n    &lt;/Provider&gt;\n  )\n}</code></pre></div>\n<p>次にその下層コンポーネント内で useStore しましょう</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;\nimport { useStore } from &#39;react-redux&#39;\n\nconst Components = () =&gt; {\n  const store = useStore()\n\n  return (...)\n}</code></pre></div>\n<p>これで store オブジェクトを参照できるようになります。</p>\n<p>ですが、直接 store を参照するのは推奨されていません、\n今までも<code class=\"language-text\">connect()</code>を使用していたように Hooks でも<code class=\"language-text\">useSelector</code>や<code class=\"language-text\">useDispatch</code>という Hooks が用意されているのでそちらを見ていきましょう。</p>\n<h2>useSelector</h2>\n<p>useSelector では store の state を参照できるようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;\nimport { useSelector } from &#39;react-redux&#39;\n\nconst Components = () =&gt; {\n  const count = useSelector(state =&gt; state.count)\n\n  return (\n    &lt;div&gt;{counter}&lt;/div&gt;\n  )\n}</code></pre></div>\n<p>これは今までの connect の第一引数でやってたことですね。</p>\n<h2>useDispatch</h2>\n<p>useDispatch は dispatch 関数を扱えるようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;\nimport { useDispatch } from &#39;react-redux&#39;\n\nconst Components = () =&gt; {\n\n  const dispatch = useDispatch()\n\n  handleClick = useCallback(() =&gt; {\n    dispatch({ type: &#39;INCREMENT&#39; })\n  })\n\n  return (\n    &lt;button onClick={handleClick}&gt;increment&lt;/button&gt;\n  )\n}</code></pre></div>\n<p>Action の中身については以前と同じく type を持ったオブジェクトを渡す形ですね</p>\n<h2>まとめ</h2>\n<p>そんなわけでさっくり HooksAPI 触ってみました。</p>\n<p>ただコード載せただけみたいになってしまったので不明な箇所があればドキュメント読むとか Twitter で絡んでくれるとかしてください</p>\n<p>Hooks 個人的には今までの connect より好きなので早く使っていきたいですね。</p>"}